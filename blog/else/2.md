# RPC

---

https://www.zhihu.com/question/25536695

## 什么是RPC

RPC 是指远程过程调用.

两台服务器A, B, 一个应用部署在A服务器上, 想要调用B服务器上应用提供的函数/方法, 由于不在一个内存空间, 不能直接调用, 需要通过网络来表达调用的语义和传达调用的数据.

1. 通讯问题, 通过在客户端和服务器之间建立TCP连接, 远程过程调用的所有交换数据都在这个连接里传输.
2. 寻址问题, A服务器上的应用怎么告诉底层的RPC框架, 如何连接到B服务器以及特定的端口, 方法的名称是什么.
3. 当A服务器上的应用发起远程过程调用时, 方法的参数需要通过底层的网络协议如TCP传递到B服务器, 由于网络协议是基于二进制的, 内存中的参数的值要序列化成二进制的形式, 也就是序列化(Serialize)或编组(marshal), 通过寻址和传输将序列化的二进制发送给B服务器.
4. B服务器收到请求后, 需要对参数进行反序列化, 恢复为内存中的表达方式, 然后找到对应的方法进行本地调用, 然后得到返回值.
5. 返回值经过序列化发送回服务器A上的应用, A再反序列化, 恢复为内存中的表达方式.

![img](https://pic4.zhimg.com/50/45366c44f775abfd0ac3b43bccc1abc3_hd.jpg)

## 为什么要进行RPC

一些无法在一个进程内, 或者一个计算机内通过本地调用的方式完成的需求.

计算机能力需要进行横向扩展, 需要在多台机器组成的集群上部署应用.

---

// TODO:
https://blog.brucefeng.info/post/what-is-rpc